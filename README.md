GI.jl
======

Julia bindings using libgobject-introspection.

This builds on https://github.com/bfredl/GI.jl

It's a work in progress but is approaching a basic level of usefulness. Focus
is on outputting code that can simplify the creation of Julia packages that wrap
GObject-based libraries.

This package currently assumes libgirepository is installed (outside Julia).
It has only been tested on Fedora Linux. However, the generated code should work
anywhere.

## Status

Most of libgirepository is wrapped.
Information like lists of structs, methods, and functions can be extracted, as
well as argument types, struct fields, etc.
Much of this can be accomplished in other ways, but GObject introspection
includes annotations that indicate whether return values should be freed,
whether pointer arguments can be optionally NULL, whether list outputs are
NULL-terminated, which argument corresponds to the length of array inputs, etc.

Note that the way GObjects and GBoxed types are handled currently is not
compatible with [Gtk.jl](https://github.com/JuliaGraphics/Gtk.jl).

Parts that are still very rough:

* Anything to do with callbacks and signals
* Handling of non-opaque GBoxed types is still being sorted out

## Generated code

Code generated by GI.jl requires [Gtk.jl](https://github.com/JuliaGraphics/Gtk.jl).

Below are a few details about the output.

### Constants

Constants are output into a submodule 'GConstants'. Constant names are
the same as in the C library but with the namespace removed. So for example
G_PRIORITY_DEFAULT becomes GLib.GConstants.PRIORITY_DEFAULT.

### Enums and flags

Enums and flags are also present in 'GConstants' and are in bare submodules. So
for example G_SIGNAL_FLAGS_RUN_LAST becomes GLib.GConstants.SignalFlags.RUN_LAST.

### GObjects and GInterfaces

GObject and GInterface types are named as in Gtk.jl, with the namespace
included. So for example we use Pango.PangoLayout rather than Pango.Layout.

Properties are exported as Julia properties and can be accessed and set using
my_object.props.property_name. Alternatively the functions get_gtk_property or
set_gtk_property! can be used, like in Gtk.jl.

### Methods

Methods of objects, interfaces, and structs are exported without the namespace
and the object/interface/struct name. So for example pango_layout_get_extents
becomes get_extents. Functions not associated with particular objects, interfaces, or structs are
exported with the namespace removed.

Arguments of C functions that are outputs are converted to returned outputs. When there
is a return value as well as argument outputs, the Julia method returns a tuple of the
outputs. For array inputs, the length parameter in the C function is removed for
Julia methods. Similarly, for array outputs, a length parameter output is
omitted in the Julia output. GError outputs are converted to throws. When pointer
inputs can optionally be NULL, the Julia methods accept nothing as the argument.
When outputs are NULL, the Julia methods output nothing.
